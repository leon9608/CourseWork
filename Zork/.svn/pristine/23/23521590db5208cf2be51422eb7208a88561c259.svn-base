package com.company;

import java.util.Arrays;

/**
 * Created by Yuyang on 11/2/2017.
 */
public class Room {

    private String name;
    private String description;
    private Direction[] directions;
    public static Room currentLocation;


    public String getNextRoom(String targetDirection) {
        for (Direction directionOption : this.directions) {
            if (targetDirection.equalsIgnoreCase(directionOption.getDirection()))
                return directionOption.getRoom();
        }
        return null;
    }

    public boolean haveAccessTo(String targetDirection) {
        for (Direction directionOption : this.directions) {
            if (targetDirection.equalsIgnoreCase(directionOption.getDirection()))
                return true;
        }
        return false;
    }

    public String getName() {
        return name;
    }

    public String getFullInstruction() {
        String output = description + "\nFrom here, you can go: ";
        int directionOption = directions.length;
        if (directionOption == 1) {
            output += directions[0].getDirection();
        } else {
            output += getDirectionLine(directionOption);
        }
        return output;
    }

    public String getDirectionLine(int count) {
        if (count == 1) {
            return "or " + directions[directions.length - count].getDirection();
        }
        return directions[directions.length - count].getDirection() + " " + getDirectionLine(count - 1);
    }

    public boolean haveAccessRoom(Room other) {
        for (Direction direction : directions) {
            if (direction.getRoom().equals(other.getName())) {
                return true;
            }
        }
        return false;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Room room = (Room) o;

        if (!name.equals(room.name)) return false;
        if (!description.equals(room.description)) return false;
        // Probably incorrect - comparing Object[] arrays with Arrays.equals
        return Arrays.equals(directions, room.directions);
    }

    @Override
    public int hashCode() {
        int result = name.hashCode();
        result = 31 * result + description.hashCode();
        result = 31 * result + Arrays.hashCode(directions);
        return result;
    }
}
