package com.company;


import com.google.gson.Gson;
import com.google.gson.stream.JsonReader;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.nio.charset.Charset;

/**
 * Created by Yuyang on 11/2/2017.
 */
public class MagicGson {
    private static final String API_MAP = "https://courses.engr.illinois.edu/cs126/resources/siebel.json";

    public Layout jsonToLayout() {
        try {
            URL url = new URL(API_MAP);
            InputStream inStream = url.openStream();
            InputStreamReader reader = new InputStreamReader(inStream, Charset.forName("UTF-8"));
            JsonReader jsonReader = new JsonReader(reader);
            Gson makeMyLifeEasy = new Gson();
            return makeMyLifeEasy.fromJson(jsonReader, Layout.class);

        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;

        }
    }

    public Layout jsonToLayout(String address ) {
        try {
            URL url = new URL(address);
            InputStream inStream = url.openStream();
            InputStreamReader reader = new InputStreamReader(inStream, Charset.forName("UTF-8"));
            JsonReader jsonReader = new JsonReader(reader);
            Gson makeMyLifeEasy = new Gson();
            return makeMyLifeEasy.fromJson(jsonReader, Layout.class);

        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;

        }
    }

}